{% extends "layout.njk" %}

{% block content %}
  <div id="admin-users">   
    <div class="header user">
      <p>Usu√°rios</p>
      <a id="button-create" href="/admin/users/register">Novo</a>
    </div>
    <div class="container_cards_users">
      {% for userComun in usersComuns %} 
        <div class="users">
             <p id="user-name">{{userComun.name}}</p>
             <p id="user-email">{{userComun.email}}</p>
          <form class="link-user">
            <a id="button-user-edit" href="/admin/profile/{{userComun.id}}/edit">Editar</a>         
          </form id="form-delete">
          {% if userComun.is_admin == false and userAdmin.is_admin == true %} 
          <form action=""> 
          <button id="button-user-delete" type="submit">Deletar</a>   
          <input type="hidden" name="id" value="{{userComun.id }}">     
          </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>  
  </div>
  <script>
    const formDelete = document.querySelector("#form-delete");
    formDelete.addEventListener("submit", function (event) {
      const confirmation = confirm("Deseja Deletar?")
      if (! confirmation) {
        event.preventDefault();
      }
    })
  </script>
  </div>
{% endblock %}